[gd_scene load_steps=15 format=3 uid="uid://c0d3bmprmf8q0"]

[ext_resource type="Script" path="res://Player/Player.gd" id="1_eghjd"]
[ext_resource type="Script" path="res://Player/CameraController.gd" id="2_7jqee"]
[ext_resource type="Script" path="res://Player/States/StateMachine.gd" id="3_82ko5"]
[ext_resource type="Script" path="res://Player/States/Idle.gd" id="4_h88q0"]
[ext_resource type="Script" path="res://Player/States/Run.gd" id="5_dheqf"]
[ext_resource type="Script" path="res://Player/States/Grapple.gd" id="6_r5qvj"]
[ext_resource type="Script" path="res://Player/States/Air.gd" id="6_wo20p"]
[ext_resource type="PackedScene" uid="uid://cqhn455src0iq" path="res://Player/Gadgets/HookSwing/grappling_hook.tscn" id="7_2lo60"]

[sub_resource type="SphereShape3D" id="SphereShape3D_tbhqn"]

[sub_resource type="SphereMesh" id="SphereMesh_pkmpe"]

[sub_resource type="CylinderShape3D" id="CylinderShape3D_p4inm"]
height = 1.50214

[sub_resource type="SeparationRayShape3D" id="SeparationRayShape3D_w05h1"]

[sub_resource type="CylinderShape3D" id="CylinderShape3D_8gs1p"]

[sub_resource type="CylinderMesh" id="CylinderMesh_m26hg"]

[node name="Player" type="CharacterBody3D"]
axis_lock_angular_x = true
axis_lock_angular_y = true
axis_lock_angular_z = true
script = ExtResource("1_eghjd")

[node name="StateMachine" type="Node" parent="."]
script = ExtResource("3_82ko5")
initial_state = NodePath("Idle")

[node name="Idle" type="Node" parent="StateMachine"]
script = ExtResource("4_h88q0")

[node name="Run" type="Node" parent="StateMachine"]
script = ExtResource("5_dheqf")

[node name="Air" type="Node" parent="StateMachine"]
script = ExtResource("6_wo20p")

[node name="Grapple" type="Node" parent="StateMachine"]
script = ExtResource("6_r5qvj")

[node name="PhysicsBody" type="RigidBody3D" parent="."]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, 0, 1.11249, -0.441113)
collision_layer = 0
collision_mask = 0
freeze = true

[node name="CollisionShape3D" type="CollisionShape3D" parent="PhysicsBody"]
shape = SubResource("SphereShape3D_tbhqn")

[node name="MeshInstance3D" type="MeshInstance3D" parent="PhysicsBody"]
mesh = SubResource("SphereMesh_pkmpe")

[node name="CollisionShape3D" type="CollisionShape3D" parent="."]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, 0, 0.75, 0)
shape = SubResource("CylinderShape3D_p4inm")

[node name="CameraController" type="Node3D" parent="."]
top_level = true
script = ExtResource("2_7jqee")
invert_mouse_y = true
tilt_upper_limit = 0.48
tilt_lower_limit = -0.8

[node name="CameraOverShoulderPivot" type="Marker3D" parent="CameraController"]
transform = Transform3D(-0.994522, 0.0401698, -0.0965018, 0, 0.92321, 0.384295, 0.104528, 0.38219, -0.918153, -0.85, 3.49, -2.33)

[node name="CameraAimPivot" type="Marker3D" parent="CameraController"]

[node name="CameraSpringArm" type="SpringArm3D" parent="CameraController"]
transform = Transform3D(-1, -3.23243e-08, 8.12273e-08, 0, 0.929133, 0.369747, -8.74228e-08, 0.369747, -0.929133, 0, 2.34, 0)
shape = SubResource("SeparationRayShape3D_w05h1")
spring_length = 10.0

[node name="CameraThirdPersonPivot" type="Marker3D" parent="CameraController/CameraSpringArm"]

[node name="PlayerCamera" type="Camera3D" parent="CameraController"]
transform = Transform3D(-1, -3.23243e-08, 8.12273e-08, 0, 0.929133, 0.369747, -8.74228e-08, 0.369747, -0.929133, 0, 6.04, -9.3)
top_level = true
fov = 50.0

[node name="CameraRayCast" type="RayCast3D" parent="CameraController/PlayerCamera"]
target_position = Vector3(0, 0, -100)

[node name="GroundShapeCast" type="ShapeCast3D" parent="."]
shape = SubResource("CylinderShape3D_8gs1p")
debug_shape_custom_color = Color(0, 1, 0, 1)

[node name="CharacterRotationRoot" type="Node3D" parent="."]

[node name="MeshInstance3D" type="MeshInstance3D" parent="."]
transform = Transform3D(1, 0, 0, 0, 0.75, 0, 0, 0, 1, 0, 0.75, 0)
mesh = SubResource("CylinderMesh_m26hg")

[node name="Inventory" type="Node" parent="."]

[node name="Weapons" type="Node" parent="Inventory"]

[node name="MeleeWeapons" type="Node" parent="Inventory/Weapons"]

[node name="RangedWeapons" type="Node" parent="Inventory/Weapons"]

[node name="Gadgets" type="Node" parent="Inventory"]

[node name="GrapplingHook" parent="Inventory/Gadgets" instance=ExtResource("7_2lo60")]
